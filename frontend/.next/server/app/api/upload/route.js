"use strict";(()=>{var e={};e.id=998,e.ids=[998],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},50852:e=>{e.exports=require("async_hooks")},14300:e=>{e.exports=require("buffer")},96206:e=>{e.exports=require("console")},6113:e=>{e.exports=require("crypto")},67643:e=>{e.exports=require("diagnostics_channel")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},85158:e=>{e.exports=require("http2")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},6005:e=>{e.exports=require("node:crypto")},15673:e=>{e.exports=require("node:events")},84492:e=>{e.exports=require("node:stream")},47261:e=>{e.exports=require("node:util")},4074:e=>{e.exports=require("perf_hooks")},63477:e=>{e.exports=require("querystring")},12781:e=>{e.exports=require("stream")},35356:e=>{e.exports=require("stream/web")},71576:e=>{e.exports=require("string_decoder")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},29830:e=>{e.exports=require("util/types")},71267:e=>{e.exports=require("worker_threads")},59796:e=>{e.exports=require("zlib")},44286:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>q,originalPathname:()=>R,patchFetch:()=>_,requestAsyncStorage:()=>h,routeModule:()=>x,serverHooks:()=>v,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>m});var s={};t.r(s),t.d(s,{DELETE:()=>d,POST:()=>l});var o=t(6170),n=t(8533),i=t(54387),a=t(37504),u=t(40999),p=t(50268),c=t(54188);async function l(e){if(!await (0,u.getServerSession)(p.L))return new a.NextResponse("Unauthorized",{status:401});try{let r=(await e.formData()).get("file");if(!r)return new a.NextResponse("No file provided",{status:400});if(!r.type.startsWith("image/"))return new a.NextResponse("File must be an image",{status:400});let t=await (0,c.gz)(r.name,r,{access:"public"});return a.NextResponse.json({url:t.url})}catch(e){return console.error("Error uploading file:",e),new a.NextResponse("Internal Server Error",{status:500})}}async function d(e){if(!await (0,u.getServerSession)(p.L))return new a.NextResponse("Unauthorized",{status:401});try{let{url:r}=await e.json();if(!r)return new a.NextResponse("No URL provided",{status:400});return await (0,c.IV)(r),a.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting file:",e),new a.NextResponse("Internal Server Error",{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\henry\\cursourProjects\\ofolio\\frontend\\app\\api\\upload\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:v,headerHooks:q,staticGenerationBailout:m}=x,R="/api/upload/route";function _(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:g})}},50268:(e,r,t)=>{t.d(r,{L:()=>n});var s=t(68152);let o=(e,r)=>{if(!e)return;let t=e.replace(/\/$/,"");return`${t}/api/auth/callback/${r}`};process.env.NEXTAUTH_URL&&(console.log("Vercel callback URL:",o(process.env.NEXTAUTH_URL_INTERNAL,"github-vercel")),console.log("Personal callback URL:",o(process.env.NEXTAUTH_URL,"github-personal")));let n={providers:[(0,s.Z)({id:"github-vercel",clientId:process.env.GITHUB_ID||"",clientSecret:process.env.GITHUB_SECRET||"",authorization:{params:{redirect_uri:o(process.env.NEXTAUTH_URL_INTERNAL,"github-vercel")}}}),(0,s.Z)({id:"github-personal",clientId:process.env.GITHUB_ID_PERSONAL||"",clientSecret:process.env.GITHUB_SECRET_PERSONAL||"",authorization:{params:{redirect_uri:o(process.env.NEXTAUTH_URL,"github-personal")}}})],callbacks:{async signIn({user:e,account:r}){if(console.log("Sign in attempt with provider:",r?.provider),console.log("Callback URL:",r?.redirect_uri),r?.provider==="github-vercel"||r?.provider==="github-personal"){let e=await fetch("https://api.github.com/user",{headers:{Authorization:`token ${r.access_token}`}}),t=await e.json();return(process.env.ALLOWED_GITHUB_USERS?.split(",")||[]).map(e=>e.trim()).includes(t.login)}return!1},jwt:async({token:e,user:r,account:t})=>(r&&(e.role="admin"),e),session:async({session:e,token:r})=>(e?.user&&(e.user.role=r.role),e)},pages:{signIn:"/auth/signin"},debug:!1,cookies:{sessionToken:{name:"__Secure-next-auth.session-token",options:{httpOnly:!0,sameSite:"lax",path:"/",secure:!0}}}}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[499,823,299,188],()=>t(44286));module.exports=s})();