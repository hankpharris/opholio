generator client {
  provider   = "prisma-client-js"
  output     = "../src/generated/client"
  engineType = "library"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Status {
  InProgress
  CompleteMaintained
  CompleteUnmaintained
  Planned
}

enum BackgroundQuality {
  low
  med
  high
}

model Project {
  id            Int      @id @default(autoincrement())
  name          String
  status        Status
  description   String?
  overviewText  String?
  overviewImage1 String?
  overviewImage2 String?
  overviewImage3 String?
  link          String?
  gitHubLink    String?
  isActive      Boolean  @default(true)
}

model SiteSettings {
  id                      Int               @id
  enableBackground        Boolean           @default(true)
  enableChatbot           Boolean           @default(false)
  enableContactForm       Boolean           @default(false)
  activeBackgroundPackId  String?
  backgroundConfig        Json              @default("{}")
  backgroundQuality       BackgroundQuality @default(med)
  reducedMotionOverride   Boolean?
  siteTitle               String            @default("Portfolio")
  tagline                 String            @default("")
  aboutContent            String            @db.Text @default("")
  avatarImageUrl          String?
  logoImageUrl            String?
  activeBackgroundPack    BackgroundPack?   @relation(fields: [activeBackgroundPackId], references: [id], onDelete: SetNull)

  @@map("SiteSettings")
}

model BackgroundPack {
  id                String        @id @default(cuid())
  name              String
  version           String
  entryUrl          String
  manifestUrl       String
  previewUrl        String?
  interactive       Boolean       @default(false)
  allowExternal     Boolean       @default(false)
  manifest          Json
  uploadedBlobUrls  Json
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  siteSettings      SiteSettings[]

  @@map("BackgroundPack")
}